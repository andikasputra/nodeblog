<%- include('../partials/header') %>
<div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
			<div class="card">
				<div class="header">
					<h4 class="title">Edit Post</h4>
					<p class="category">Edit your post</p>
				</div>
				<div class="content table-responsive table-full-width">
					<form action="?_method=PUT" method="post" class="form" enctype="multipart/form-data">
						<div class="form-group">
							<label for="title">Title</label>
							<input type="text" id="title" name="title" value="<%= post.title %>" class="form-control" required="required">
						</div>
						<div class="form-group">
							<label for="category">Kategori</label>
							<select name="categoryid" id="category" class="form-control">
								<% categories.map(category => { %>
									<option value="<%= category.dataValues.id %>" <%= (post.CategoryId == category.dataValues.id) ? 'selected' : '' %>><%= category.dataValues.name %></option>
								<% }) %>
							</select>
						</div>
						<div class="form-group">
							<label for="content">Content</label>
							<textarea id="content" class="form-control" name="content" required="required"><%= post.content %></textarea>
						</div>
						<div class="form-group">
							<label for="date">Date</label>
							<input id="date" class="form-control" type="date" name="date" required="required" value="<%= post.date %>">
						</div>
						<div class="form-group">
							<label for="picture">Picture</label><br>
							<img src="/image/<%= post.image %>" alt="" width="250px">
							<input type="hidden" name="oldimage" value="<%= post.image %>">
							<input type="file" id="picture" name="image" class="form-control">
						</div>
						<div class="form-group">
							<button class="btn btn-success" type="submit">Save</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ckeditor/4.7.0/ckeditor.js"></script>
<script>
	CKEDITOR.replace( 'content' );
</script>
<%- include('../partials/footer') %>